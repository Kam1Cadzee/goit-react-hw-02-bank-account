{"version":3,"sources":["components/Dashboard/Dashboard.module.css","components/Dashboard/Balance/Balance.module.css","components/Dashboard/TransactionHistory/TransactionHistory.module.css","components/Dashboard/Balance/Balance.jsx","components/Dashboard/TransactionHistory/TransactionHistory.jsx","components/Dashboard/transactionTypes.js","components/Dashboard/Controls/Controls.jsx","components/Dashboard/Dashboard.jsx","components/App.jsx","index.js"],"names":["module","exports","dashboard","balance","history","Balance","_ref","costs","income","react_default","a","createElement","className","styles","React","memo","transactions","map","item","key","id","type","amount","date","Object","freeze","DEPOSIT","WITHDRAW","Button","styled","button","_templateObject","Input","input","_templateObject2","Wrraper","div","_templateObject3","Controls","state","value","handleChange","e","_this","setState","target","handleClick","_this$props","props","onClickDeposit","onClickWithdraw","name","this","onChange","onClick","types","PureComponent","Dashboard","createItemHistory","shortid","generate","Date","toLocaleString","getCostsOrIncome","filter","trans","reduce","acc","current","handelClickDeposit","toastManager","concat","toConsumableArray","add","appearance","autoDismiss","handelClickWithdraw","localStorage","getItem","JSON","parse","prevProps","prevState","snapshot","setItem","stringify","_this$state","Dashboard_Controls_Controls","Dashboard_Balance_Balance","Dashboard_TransactionHistory_TransactionHistory","Component","withToastManager","App","dist","autoDismissTimeout","components_Dashboard_Dashboard","ReactDOM","render","components_App","document","getElementById"],"mappings":"4EACAA,EAAAC,QAAA,CAAkBC,UAAA,kDCAlBF,EAAAC,QAAA,CAAkBE,QAAA,8CCAlBH,EAAAC,QAAA,CAAkBG,QAAA,kRCiBHC,EAdC,SAAAC,GAAgC,IAA7BH,EAA6BG,EAA7BH,QAASI,EAAoBD,EAApBC,MAAOC,EAAaF,EAAbE,OACjC,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOV,SACrBM,EAAAC,EAAAC,cAAA,cAAMJ,GACNE,EAAAC,EAAAC,cAAA,cAAMH,GACNC,EAAAC,EAAAC,cAAA,SAAIR,EAAJ,wBC6BSW,MAAMC,KAlCM,SAAAT,GAAsB,IAAnBU,EAAmBV,EAAnBU,aAC5B,OACEP,EAAAC,EAAAC,cAAA,SAAOC,UAAWC,IAAOT,SACvBK,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,oBAGJF,EAAAC,EAAAC,cAAA,aACGK,EAAaC,IAAI,SAAAC,GAAI,OACpBT,EAAAC,EAAAC,cAAA,MAAIQ,IAAKD,EAAKE,IACZX,EAAAC,EAAAC,cAAA,UAAKO,EAAKG,MACVZ,EAAAC,EAAAC,cAAA,UAAKO,EAAKI,QACVb,EAAAC,EAAAC,cAAA,UAAKO,EAAKK,qBCnBPC,SAAOC,OAAO,CAC3BC,QAAS,UACTC,SAAU,sqBCGZ,IAAMC,EAASC,IAAOC,OAAVC,KAYNC,EAAQH,IAAOI,MAAVC,KAOLC,EAAUN,IAAOO,IAAVC,IAKPT,GAuCSU,6MAlCbC,MAAQ,CAAEC,MAAO,KAEjBC,aAAe,SAAAC,GAAC,OAAIC,EAAKC,SAAS,CAAEJ,OAAQE,EAAEG,OAAOL,WAErDM,YAAc,SAAAxC,GAAgB,IAAbuC,EAAavC,EAAbuC,OAAaE,EACgBJ,EAAKK,MAAzCC,EADoBF,EACpBE,eAAgBC,EADIH,EACJG,gBAChBC,EAASN,EAATM,KACAX,EAAUG,EAAKJ,MAAfC,MACK,YAATW,EAAoBF,EAAeT,GACrB,aAATW,GAAqBD,EAAgBV,GAC9CG,EAAKC,SAAS,CAAEJ,MAAO,6EAGhB,IACCA,EAAUY,KAAKb,MAAfC,MACR,OACE/B,EAAAC,EAAAC,cAACwB,EAAD,KACE1B,EAAAC,EAAAC,cAACqB,EAAD,CAAOX,KAAK,SAASmB,MAAOA,EAAOa,SAAUD,KAAKX,eAClDhC,EAAAC,EAAAC,cAACiB,EAAD,CAAQuB,KAAK,UAAU9B,KAAK,SAASiC,QAASF,KAAKN,aAChDS,EAAM7B,SAETjB,EAAAC,EAAAC,cAACiB,EAAD,CAAQuB,KAAK,WAAW9B,KAAK,SAASiC,QAASF,KAAKN,aACjDS,EAAM5B,kBAvBMb,IAAM0C,sBCzBvBC,6MACJlB,MAAQ,CAAEnC,QAAS,GAAID,QAAS,KAahCuD,kBAAoB,SAACpC,EAAQD,GAAT,MAAmB,CACrCD,GAAIuC,IAAQC,WACZvC,OACAC,SACAC,MAAM,IAAIsC,MAAOC,qBAGnBC,iBAAmB,SAAA1C,GAAI,OAErBsB,EAAKJ,MAAMnC,QACR4D,OAAO,SAAAC,GAAK,OAAIA,EAAM5C,OAASA,IAC/B6C,OAAO,SAACC,EAAKC,GAAN,OAAkBD,EAAMC,EAAQ9C,QAAQ,MAEpD+C,mBAAqB,SAAA7B,GAAS,IACpB8B,EAAiB3B,EAAKK,MAAtBsB,aACM,IAAV9B,EAOJG,EAAKC,SAAS,SAAAL,GAEZ,MAAO,CACLpC,QAFcoC,EAAMpC,QAAUqC,EAG9BpC,QAAO,GAAAmE,OAAA/C,OAAAgD,EAAA,EAAAhD,CACFe,EAAMnC,SADJ,CAELuC,EAAKe,kBAAkBlB,EAAOe,EAAM7B,cAZxC4C,EAAaG,IAAI,8MAA0C,CACzDC,WAAY,UACZC,aAAa,OAgBnBC,oBAAsB,SAAApC,GAAS,IACvBrC,EAAYwC,EAAKJ,MAAjBpC,QACEmE,EAAiB3B,EAAKK,MAAtBsB,aACJnE,EAAUqC,EACZ8B,EAAaG,IACX,oSACA,CACEC,WAAY,QACZC,aAAa,IAKL,IAAVnC,EAOJG,EAAKC,SAAS,SAAAL,GAEZ,MAAO,CACLpC,QAFFA,EAAUoC,EAAMpC,QAAUqC,EAGxBpC,QAAO,GAAAmE,OAAA/C,OAAAgD,EAAA,EAAAhD,CACFe,EAAMnC,SADJ,CAELuC,EAAKe,kBAAkBlB,EAAOe,EAAM5B,eAZxC2C,EAAaG,IAAI,8MAA0C,CACzDC,WAAY,UACZC,aAAa,wFA5DjB,IAAMpC,EAAQsC,aAAaC,QAAQ,QAC/BvC,GACFa,KAAKR,SAASmC,KAAKC,MAAMzC,+CAIV0C,EAAWC,EAAWC,GACvCN,aAAaO,QAAQ,OAAQL,KAAKM,UAAUjC,KAAKb,yCAqE1C,IAAA+C,EACsBlC,KAAKb,MAA1BnC,EADDkF,EACClF,QAASD,EADVmF,EACUnF,QACjB,OACEM,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOX,WACrBO,EAAAC,EAAAC,cAAC4E,EAAD,CACEtC,eAAgBG,KAAKiB,mBACrBnB,gBAAiBE,KAAKwB,sBAExBnE,EAAAC,EAAAC,cAAC6E,EAAD,CACErF,QAASA,EACTI,MAAO6C,KAAKW,iBAAiBR,EAAM7B,SACnClB,OAAQ4C,KAAKW,iBAAiBR,EAAM5B,YAEtClB,EAAAC,EAAAC,cAAC8E,EAAD,CAAoBzE,aAAcZ,YA7FlBU,IAAM4E,WAmGfC,6BAAiBlC,GC9FjBmC,EAVH,WACV,OACEnF,EAAAC,EAAAC,cAACkF,EAAA,cAAD,CAAeC,mBAAoB,KACjCrF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAACoF,EAAD,SCFRC,IAASC,OAAOxF,EAAAC,EAAAC,cAACuF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.97e7f25a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboard\":\"Dashboard_dashboard__LIGN4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"balance\":\"Balance_balance__3DqMj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"TransactionHistory_history__1EPVm\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Balance.module.css';\n\nconst Balance = ({ balance, costs, income }) => {\n  return (\n    <div className={styles.balance}>\n      <p>+ {costs}</p>\n      <p>- {income}</p>\n      <p>{balance}$</p>\n    </div>\n  );\n};\nBalance.propTypes = {\n  balance: PropTypes.number.isRequired,\n  costs: PropTypes.number.isRequired,\n  income: PropTypes.number.isRequired,\n};\nexport default Balance;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './TransactionHistory.module.css';\n\nconst TransactionHistory = ({ transactions }) => {\n  return (\n    <table className={styles.history}>\n      <thead>\n        <tr>\n          <th>Transaction</th>\n          <th>Amount</th>\n          <th>Date</th>\n        </tr>\n      </thead>\n      <tbody>\n        {transactions.map(item => (\n          <tr key={item.id}>\n            <td>{item.type}</td>\n            <td>{item.amount}</td>\n            <td>{item.date}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nTransactionHistory.propTypes = {\n  transactions: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      type: PropTypes.string.isRequired,\n      amount: PropTypes.number.isRequired,\n      date: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n};\n\nexport default React.memo(TransactionHistory);\n","export default Object.freeze({\n  DEPOSIT: 'Deposit',\n  WITHDRAW: 'Withdraw',\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport types from '../transactionTypes';\nimport styled from 'styled-components';\n\nconst Button = styled.button`\n  color: #fff;\n  background-color: #3884fe;\n  font-weight: bold;\n  padding: 10px 20px;\n  border-radius: 3px;\n  border: none;\n  cursor: pointer;\n  :hover {\n    background-color: rgba(56, 132, 254, 0.69);\n  }\n`;\nconst Input = styled.input`\n  border: none;\n  padding: 5px;\n  border-radius: 3px;\n  color: #888;\n  font-size: 18px;\n`;\nconst Wrraper = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n  background-color: #062b55;\n  > ${Button} {\n    margin-left: 10px;\n  }\n`;\nclass Controls extends React.PureComponent {\n  state = { value: 0 };\n\n  handleChange = e => this.setState({ value: +e.target.value });\n\n  handleClick = ({ target }) => {\n    const { onClickDeposit, onClickWithdraw } = this.props;\n    const { name } = target;\n    const { value } = this.state;\n    if (name === 'deposit') onClickDeposit(value);\n    else if (name === 'withdraw') onClickWithdraw(value);\n    this.setState({ value: 0 });\n  };\n\n  render() {\n    const { value } = this.state;\n    return (\n      <Wrraper>\n        <Input type=\"number\" value={value} onChange={this.handleChange} />\n        <Button name=\"deposit\" type=\"button\" onClick={this.handleClick}>\n          {types.DEPOSIT}\n        </Button>\n        <Button name=\"withdraw\" type=\"button\" onClick={this.handleClick}>\n          {types.WITHDRAW}\n        </Button>\n      </Wrraper>\n    );\n  }\n}\n\nControls.propTypes = {\n  onClickDeposit: PropTypes.func.isRequired,\n  onClickWithdraw: PropTypes.func.isRequired,\n};\n\nexport default Controls;\n","import React from 'react';\nimport shortid from 'shortid';\nimport styles from './Dashboard.module.css';\nimport Balance from './Balance/Balance';\nimport TransactionHistory from './TransactionHistory/TransactionHistory';\nimport Controls from './Controls/Controls';\nimport types from './transactionTypes';\nimport { withToastManager } from 'react-toast-notifications';\nclass Dashboard extends React.Component {\n  state = { history: [], balance: 0 };\n\n  componentDidMount() {\n    const state = localStorage.getItem('bank');\n    if (state) {\n      this.setState(JSON.parse(state));\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    localStorage.setItem('bank', JSON.stringify(this.state));\n  }\n\n  createItemHistory = (amount, type) => ({\n    id: shortid.generate(),\n    type,\n    amount,\n    date: new Date().toLocaleString(),\n  });\n\n  getCostsOrIncome = type =>\n    // eslint-disable-next-line react/destructuring-assignment\n    this.state.history\n      .filter(trans => trans.type === type)\n      .reduce((acc, current) => acc + current.amount, 0);\n\n  handelClickDeposit = value => {\n    const { toastManager } = this.props;\n    if (value === 0) {\n      toastManager.add('Введите сумму для проведения операции!', {\n        appearance: 'warning',\n        autoDismiss: true,\n      });\n      return;\n    }\n    this.setState(state => {\n      const balance = state.balance + value;\n      return {\n        balance,\n        history: [\n          ...state.history,\n          this.createItemHistory(value, types.DEPOSIT),\n        ],\n      };\n    });\n  };\n\n  handelClickWithdraw = value => {\n    let { balance } = this.state;\n    const { toastManager } = this.props;\n    if (balance < value) {\n      toastManager.add(\n        'На счету недостаточно средств для проведения операции!',\n        {\n          appearance: 'error',\n          autoDismiss: true,\n        },\n      );\n      return;\n    }\n    if (value === 0) {\n      toastManager.add('Введите сумму для проведения операции!', {\n        appearance: 'warning',\n        autoDismiss: true,\n      });\n      return;\n    }\n    this.setState(state => {\n      balance = state.balance - value;\n      return {\n        balance,\n        history: [\n          ...state.history,\n          this.createItemHistory(value, types.WITHDRAW),\n        ],\n      };\n    });\n  };\n\n  render() {\n    const { history, balance } = this.state;\n    return (\n      <div className={styles.dashboard}>\n        <Controls\n          onClickDeposit={this.handelClickDeposit}\n          onClickWithdraw={this.handelClickWithdraw}\n        />\n        <Balance\n          balance={balance}\n          costs={this.getCostsOrIncome(types.DEPOSIT)}\n          income={this.getCostsOrIncome(types.WITHDRAW)}\n        />\n        <TransactionHistory transactions={history} />\n      </div>\n    );\n  }\n}\n\nexport default withToastManager(Dashboard);\n","import React from 'react';\nimport Dashboard from './Dashboard/Dashboard';\nimport { ToastProvider } from 'react-toast-notifications';\nconst App = () => {\n  return (\n    <ToastProvider autoDismissTimeout={4000}>\n      <div className=\"app\">\n        <Dashboard />\n      </div>\n    </ToastProvider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}